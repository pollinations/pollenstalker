(this.webpackJsonpFollowthePollen=this.webpackJsonpFollowthePollen||[]).push([[0],{129:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return d}));n(13);var r=n(0),a=n.n(r),c=n(6),u=n(21),i=n.n(u),o=n(41),s=n(35),p=n(29),f=n(132),l=i()("ipfsWebClient"),b=function(){var t=Object(c.a)(a.a.mark((function t(e){var n,r,c,u,i,f,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.name,r=e.cid,c=e.text,u=Object(s.extname)(n),i=v(u),l("ext",u,"extIsJSON",i),f=Object(p.b)(r,n),!i){t.next=19;break}return t.next=8,c();case 8:return b=t.sent,t.prev=9,t.abrupt("return",Object(o.parse)(b));case 13:return t.prev=13,t.t0=t.catch(9),l("result was not json. returning raw."),t.abrupt("return",b);case 17:t.next=20;break;case 19:return t.abrupt("return",f);case 20:case"end":return t.stop()}}),t,null,[[9,13]])})));return function(e){return t.apply(this,arguments)}}(),d=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l("Getting state for CID",t),Object(f.a)(t,b,e)};function v(t){return 0===t.length||".json"===t.toLowerCase()||".ipynb"===t.toLowerCase()||".md"===t.toLowerCase()}}).call(this,n(83).Buffer)},132:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(28),a=n(133),c=n(0),u=n.n(c),i=n(6),o=n(29),s=n(21),p=n.n(s),f=n(370),l=n(35),b=n(41),d=p()("ipfsState"),v=function(){var t=Object(i.a)(u.a.mark((function t(e){var n,r,a,c=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:function(t){return t},r=c.length>2&&void 0!==c[2]&&c[2],t.next=4,Object(o.c)();case 4:return a=t.sent,d("Getting state for CID",e),t.prev=6,t.next=9,x(a,{cid:e,name:"root",type:"dir",path:"/",rootCID:e},n,r);case 9:return t.abrupt("return",t.sent);case 12:t.prev=12,t.t0=t.catch(6),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),h={},x=function(t,e,n,c){var u=e.cid,i=Object(a.a)(e,["cid"]),o="".concat(u," - ").concat(n.toString());return!h[o]||c?(d("cache miss",u),h[o]=m(t,Object(r.a)({cid:u},i),n,c)):d("cache hit",u),h[o]},m=function(){var t=Object(i.a)(u.a.mark((function t(e,n,a,c){var i,s,p,b,v,h,m,g,O,w,y,k;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.cid,s=n.type,p=n.name,b=n.path,v=n.rootCID,d("ipfs state getter callback name",a.toString()),h=e.ls,e.get,i=Object(o.d)(i),(m=d.extend("_getIPFSState(".concat(b,")")))("Getting state for",s,p,i),"dir"!==s){t.next=19;break}return t.next=9,h(i);case 9:return g=t.sent,m("Got files for",p,i,g),O=g.map((function(t){return t.name})),t.next=14,u=g.map((function(t){return x(e,Object(r.a)(Object(r.a)({},t),{},{path:Object(l.join)(b,t.name),rootCID:v}),a,c)})),Promise.all(u);case 14:return w=t.sent,y=Object.fromEntries(Object(f.a)(O,w)),m("contents",y),Object.defineProperty(y,".cid",{value:i}),t.abrupt("return",y);case 19:if("file"!==s){t.next=24;break}return t.next=22,a(Object(r.a)({cid:i,path:b,name:p,rootCID:v},j(i,e)),e);case 22:return k=t.sent,t.abrupt("return",k);case 24:throw'Unknown file type "'.concat(s,'" encountered. Path: "').concat(b,'", CID: "').concat(i,'".');case 25:case"end":return t.stop()}var u}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),j=function(t,e){var n=e.get;return d("creating data fetchers for cid",t),{json:function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=b.parse,e.next=3,n(t);case 3:return e.t1=e.sent.toString(),e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),text:function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return e.abrupt("return",e.sent.toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),buffer:function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}},139:function(t,e,n){},204:function(t,e){},29:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g})),n.d(e,"c",(function(){return w})),n.d(e,"e",(function(){return C})),n.d(e,"b",(function(){return H})),n.d(e,"d",(function(){return M}));var r,a=n(0),c=n.n(a),u=n(6),i=n(21),o=n.n(i),s=n(127),p=n(128),f=n(65),l=n.n(f),b=n(7),d=n(35),v=n(369),h=n(36),x=o()("ipfsConnector"),m="https://api.pollinations.ai",j=null;r=h.a,t.from(r,"base64").toString("utf8");function g(){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j||(j=E().then((function(t){return Object(p.create)({port:5005,url:t,timeout:"2h"})}))),t.abrupt("return",j);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return e=t.sent,t.abrupt("return",{ls:function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),get:function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,_(e,n,r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var k="/tmp_".concat((new Date).toISOString().replace(/[\W_]+/g,"_"));function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=g().then((function(e){return I(e,t)})),n=function(t){return Object(u.a)(c.a.mark((function n(){var r,a,u,i,o,s,p=arguments;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=p.length>0&&void 0!==p[0]?p[0]:"/",n.next=3,g();case 3:return a=n.sent,n.next=6,e;case 6:for(x("join",k,r),u=Object(d.join)(k,r),i=p.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=p[s];return n.next=11,t.apply(void 0,[a,u].concat(o));case 11:return n.next=13,U(a,k);case 13:return n.abrupt("return",n.sent);case 14:case"end":return n.stop()}}),n)})))},r={add:n(P),addFile:n(G),rm:n(B),mkDir:n(J),cid:n(h.b),close:function(){var t=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x("closing input writer. Deleting",k),t.next=3,e;case 3:return t.t0=B,t.next=6,g();case 6:return t.t1=t.sent,t.t2=k,t.next=10,(0,t.t0)(t.t1,t.t2);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),pin:function(){var t=Object(u.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=F,t.next=3,g();case 3:return t.t1=t.sent,t.t2=e,t.next=7,(0,t.t0)(t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return r}function I(t,e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(){var t=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(e,k);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,r();case 3:if(a=t.sent,x("existing root CID",a),null!==a){t.next=21;break}if(null!==n){t.next=12;break}return x("Creating mfs root since it did not exist."),t.next=10,J(e,k);case 10:t.next=15;break;case 12:return x("Copying supplied rootCID",n,"to MFS root."),t.next=15,T(e,n,k);case 15:return t.next=17,r();case 17:a=t.sent,x("new root CID",a),t.next=29;break;case 21:if(x("Checking if supplied cid is the same as root cid"),a===n){t.next=29;break}return x("CIDs are different. Removing existing  MFS root"),t.next=26,B(e,k);case 26:return x("Copying",a,"to mfs root."),t.next=29,T(e,a,k);case 29:return t.next=31,r();case 31:return t.abrupt("return",t.sent);case 32:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S=function(){var t=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S();case 2:if(!t.sent){t.next=5;break}return x("Ipfs at localhost:5001 is reachable. Connecting..."),t.abrupt("return","http://localhost:5001");case 5:return x("localhost:5001 is not reachable. Connecting to",m),t.abrupt("return",m);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=Object(u.a)(c.a.mark((function t(e,n,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x("Copying from ","/ipfs/".concat(n),"to",r),t.next=3,e.files.cp("/ipfs/".concat(n),r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),F=function(){var t=Object(u.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x("Pinning",n),t.next=3,e.pin.add(n,{recursive:!0});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),H=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e?"?filename=".concat(e):"";return"https://ipfs.pollinations.ai/ipfs/".concat(t).concat(n)},M=function(e){return function(t){return t.split("\n")[0]}(function(t){if(!t)throw new Error("CID is falsy");return t.replace("/ipfs/","")}(e instanceof Object&&"cid"in e?e.cid.toString():b.CID.asCID(e)||e instanceof t?e.toString():e))},W=function(t){var e=t.name,n=t.path,r=t.cid,a=t.type;return{name:e,path:n,cid:M(r),type:a}},A=function(){var t=Object(u.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L(e,n);case 3:return n=t.sent,x("calling ipfs ls with cid",n),t.next=7,Object(h.d)(e.ls(M(n)));case 7:return r=t.sent.filter((function(t){var e=t.type,n=t.name;return"unknown"!==e&&void 0!==n})).map(W),x("got ipfs ls result",r),t.abrupt("return",r);case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}(),P=function(){var t=Object(u.a)(c.a.mark((function t(e,n,r){var a,u,i=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.length>3&&void 0!==i[3]?i[3]:{},x("adding",n,"options",a),u=null,t.prev=3,t.t0=M,t.next=7,e.add(r,a);case 7:t.t1=t.sent,u=(0,t.t0)(t.t1),t.next=15;break;case 11:return t.prev=11,t.t2=t.catch(3),x("could not add file",n,"becaus of",t.t2.message,". Maybe the content was deleted before it could be added?"),t.abrupt("return",null);case 15:return x("added",u),t.prev=16,x("Trying to delete",n),t.next=20,e.files.rm(n,{recursive:!0});case 20:t.next=25;break;case 22:t.prev=22,t.t3=t.catch(16),x("Could not delete. Probably did not exist.");case 25:return x("copying to",n),t.prev=26,t.next=29,e.files.cp("/ipfs/".concat(u),n,{create:!0});case 29:t.next=34;break;case 31:t.prev=31,t.t4=t.catch(26),x("couldn't copy. file probably existed for some reason");case 34:return t.abrupt("return",u);case 35:case"end":return t.stop()}}),t,null,[[3,11],[16,22],[26,31]])})));return function(e,n,r){return t.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(c.a.mark((function e(n,r,a){var u,i,o,s,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=a.onlyLink,void 0!==u&&u,i=x.extend("ipfsGet(".concat(r,")")),e.next=4,L(n,r);case 4:return r=e.sent,e.next=7,l()(n.cat(r));case 7:if(o=e.sent,s=o.map(t.from),i("Got all chunks. Total:",s.length),0!==s.length){e.next=12;break}return e.abrupt("return",t.from([]));case 12:return p=s.length>1?t.concat(s):s[0],i("Received content length:",p.length),e.abrupt("return",p);case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),G=function(){var t=Object(u.a)(c.a.mark((function t(e,n,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x("Adding file",r,"to",n),Object(d.basename)(r),Object(d.dirname)(r),t.next=5,P(e,n,Object(s.createReadStream)(r));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();function L(t,e){return V.apply(this,arguments)}function V(){return(V=Object(u.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x("Trying to resolve CID",n),!n.startsWith("/ipns")){t.next=5;break}return t.next=4,Y(e,n);case 4:n=t.sent;case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(t,e){return z.apply(this,arguments)}function z(){return(z=Object(u.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x("Creating folder",n),t.prev=1,t.next=4,e.files.mkdir(n,{parents:!0});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),x("couldn't create folder because it probably already exists",t.t0);case 9:return t.next=11,e.files.stat(n);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}function B(t,e){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x("Deleting",n),t.prev=1,t.next=4,e.files.rm(n,{force:!0,recursive:!0});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),x("couldn't delete \"".concat(n,"\"  because it probably doesn't exist"),t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}function U(t){return Z.apply(this,arguments)}function Z(){return(Z=Object(u.a)(c.a.mark((function t(e){var n,r=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"/",t.prev=1,t.t0=M,t.next=5,e.files.stat(n);case 5:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:return t.prev=9,t.t2=t.catch(1),x("Couldn't get CID for path",n,". Assuming it doesn't exist and returning null"),t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}var Y=function(){var t=Object(u.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=M,t.t1=v.a,t.next=4,Object(h.d)(e.name.resolve(n,{nocache:!0}));case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}).call(this,n(83).Buffer)},36:function(t,e,n){"use strict";n.d(e,"d",(function(){return b})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return v})),n.d(e,"a",(function(){return h}));var r=n(0),a=n.n(r),c=n(43),u=n(6),i=n(78),o=n(21),s=n.n(o),p=n(42),f=n.n(p),l=s()("utils"),b=function(){var t=Object(u.a)(a.a.mark((function t(e){var n,r,u,o,s,p,f,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],t.prev=1,r=!0,u=!1,t.prev=4,s=Object(i.a)(e);case 6:return t.next=8,s.next();case 8:return p=t.sent,r=p.done,t.next=12,p.value;case 12:if(f=t.sent,r){t.next=19;break}l=f,n=[].concat(Object(c.a)(n),[l]);case 16:r=!0,t.next=6;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(4),u=!0,o=t.t0;case 25:if(t.prev=25,t.prev=26,r||null==s.return){t.next=30;break}return t.next=30,s.return();case 30:if(t.prev=30,!u){t.next=33;break}throw o;case 33:return t.finish(30);case 34:return t.finish(25);case 35:t.next=41;break;case 37:return t.prev=37,t.t1=t.catch(1),console.error("Exception",t.t1),t.abrupt("return",[void 0]);case 41:return t.abrupt("return",n);case 42:case"end":return t.stop()}}),t,null,[[1,37],[4,21,25,35],[26,,30,34]])})));return function(e){return t.apply(this,arguments)}}(),d=function(){return null},v=function(t){return Object(u.a)(a.a.mark((function e(){var n,r=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=5;case 1:if(!(n-- >0)){e.next=15;break}return e.prev=2,e.next=5,t.apply(void 0,r);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),l("retryException #".concat(n),e.t0),e.next=13,f()(1e3);case 13:e.next=1;break;case 15:throw new Error("Too many retries");case 16:case"end":return e.stop()}}),e,null,[[2,8]])})))},h="QmFzaWMgY0c5c2JHbHVZWFJwYjI1ekxXWnliMjUwWlc1a09sWnJSazVIYVdZM1kxUjBVWGt6"},365:function(t,e){},368:function(t,e,n){"use strict";n.r(e);var r,a,c,u,i=n(4),o=n.n(i),s=n(124),p=n.n(s),f=(n(139),n(131)),l=n(54),b=n(55),d="0.01em",v=b.a.div(r||(r=Object(l.a)(["\n  min-width: 500px;\n  max-width: 100vw;\n\n  min-height: calc( 100vh - "," - ",");\n  margin: 0;\n  padding: 0.3em;\n\n  display: grid;\n  grid-template-columns: repeat(\n    auto-fill,\n    minmax(300px, 1fr)\n  );\n  grid-template-rows: 1fr 2fr 1fr;\n    grid-gap: 1em;\n  grid-auto-flow: dense;\n\n  color: black;\n"])),"3em",d),h=(b.a.div(a||(a=Object(l.a)(["\nwidth: 100%;\nheight: ",";\n\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\n\nh2 {\n  padding: 1.5em;\n}\nborder-bottom: "," solid rgba(127,127,127,0.5);\nbackground-color: rgba(0,0,0,0);\n"])),"3em",d),b.a.button(c||(c=Object(l.a)(["\nfont-style: italic;\ntext-decoration: underline;\ncolor: inherit;\nfont-size: 1em;\nborder: none;\ncursor: pointer;\npadding: 1.5em;\nbackground-color: transparent;\n"]))),b.a.body(u||(u=Object(l.a)(["\n\n\n  h2{\n      color: rgba(127,127,127);\n      font-weight: 400; \n  }\n  \n  h2,\n  a,\n  p {\n    color: black;\n  }\n  \n  a {\n    font-style: italic;\n    line-height: 1em;\n  }\n  \n  \n  .article {\n    height: 500px;\n    padding: 0em;\n    background: #fff;\n  \n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n\n    \n    p {\n        padding: 0 1em;\n    }\n\n  }\n"])))),x=n(45),m=n.n(x),j=n(28),g=n(43),O=n(13);var w=n(0),y=n.n(w),k=n(6),C=n(42),I=n.n(C),D=n(21),S=n.n(D),E=n(18),T=(n(130),n(29)),F=n(36),H=S()("ipfs:pubsub");function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:F.b,a=W(r),c=a.gotHeartbeat,u=a.closeHeartbeat,i=null,o=!1,s=function(t){"HEARTBEAT"===t?c():n(t)};return Object(k.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o){n.next=7;break}return i=A(t+e,s),n.next=4,I()(3e5);case 4:i(),n.next=0;break;case 7:case"end":return n.stop()}}),n)})))(),function(){H("Unsubscribing from pubsub events from",t,e),i(),u(),o=!0}}function W(t){var e=(new Date).getTime(),n=null;function r(){n=setTimeout((function(){var n=((new Date).getTime()-e)/1e3;H("Heartbeat timeout. Time since last:",n),t({lastHeartbeat:e,alive:!1})}),18e3)}return r(),{gotHeartbeat:function(){var a=(new Date).getTime();H("Heartbeat from pubsub. Time since last:",(a-e)/1e3),e=a,n&&clearTimeout(n),t({alive:!0}),r()},closeHeartbeat:function(){n&&clearTimeout(n)}}}function A(t,e){var n=new E.AbortController;return Object(k.a)(y.a.mark((function r(){var a,c,u;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=function(){var t=Object(k.a)(y.a.mark((function t(){var e,r,a,c=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=c.length,r=new Array(e),a=0;a<e;a++)r[a]=c[a];if(H.apply(void 0,["onError"].concat(r,["aborting"])),!n.signal.aborted){t.next=4;break}return t.abrupt("return");case 4:return n.abort(),t.next=7,I()(300);case 7:return H("resubscribing"),t.next=10,u();case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(r){var a=r.data;if(n.signal.aborted)console.error("Subscription to",t,"was aborted. Shouldn't receive any more messages.");else{var c=(new TextDecoder).decode(a);e(c)}},(u=function(){var e=Object(k.a)(y.a.mark((function e(){var r,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)();case 2:return r=e.sent,e.prev=3,console.log("Executing subscribe",t),e.next=7,r.pubsub.subscribe(t,(function(){return c.apply(void 0,arguments)}),{onError:a,signal:n.signal,timeout:"4h"});case 7:i=e.sent,console.log(i),e.next=23;break;case 11:if(e.prev=11,e.t0=e.catch(3),H("subscribe error",e.t0,e.t0.name),"DOMException"!==e.t0.name){e.next=17;break}return H("subscription was aborted. returning"),e.abrupt("return");case 17:if(!(null===(o=e.t0.message)||void 0===o?void 0:o.startsWith("Already subscribed"))){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,I()(300);case 21:return e.next=23,u();case 23:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}())();case 4:case"end":return r.stop()}}),r)})))(),function(){H("subscribe abort was called"),n.abort()}}var P=n(129),_=S()("useIPFS"),G=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(i.useState)({}),r=Object(O.a)(n,2),a=r[0],c=r[1];return _("ipfs state",a),Object(i.useEffect)((function(){_("setContentID",t),t&&(_("dispatching new contentID",t),Object(P.a)(t,e).then(c))}),[t]),a},L=n(41),V=n(371),J=n(372),z=(n(369),S()("media"),{all:[".jpg",".jpeg",".png",".mp4",".webm"],video:[".mp4",".webm"],image:[".jpg",".jpeg",".png"],text:[".md",".txt"],audio:[".mp3",".wav",".ogg",".flac"]});function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",n=z[e],r=function(t){return Object(V.a)(J.a,n.map((function(e){return t.toLowerCase().endsWith(e)})))};return t?Object.keys(t).filter(r).map((function(e){return[e,t[e]]})).reverse():[]}function R(t){var e=B(t);if(!e||0===e.length)return U;var n=e.shift();return{images:function(t){var e=Math.max(1,Math.floor(t.length/20));return t.filter((function(t,n){return n%e===e-1}))}(e),first:{filename:n[0],url:n[1]}}}var U={images:[],first:{}};var Z=function(t,e,n){var r=Y(t)||N(t),a=n[e-1];if(r&&a&&a.trim().startsWith("#")&&!a.includes("#@param")){var c=a.trim().slice(1).trim();return Object(j.a)(Object(j.a)({},r),{},{description:c})}return r},Y=function(t){var e=t.match(/^([a-zA-Z0-9-_]+)\s=\s(.*)\s+#@param\s*{type:\s*"(.*)"}/);if(!e)return null;var n=Object(O.a)(e,4);n[0];return{name:n[1],defaultVal:n[2],type:n[3]}},N=function(t){var e=t.match(/^([a-zA-Z0-9-_]+)\s=\s*(.*)\s*#@param\s*(\[.*\])/);if(!e)return null;var n=Object(O.a)(e,4),r=(n[0],n[1]),a=n[2],c=n[3];return{name:r,defaultVal:a,type:"string",enumOptions:Object(L.parse)(c)}},Q=function(t){var e=t.name,n=t.defaultVal,r=t.type,a=t.description,c=t.enumOptions;return"True"!=(n=n.trim())&&"False"!=n||(n=n.toLowerCase()),[e,{enum:c,type:r,default:Object(L.parse)(n),title:e,description:a}]},X=function(t){return"code"===t.cell_type&&t.source.join("\n").includes("#@param")},q=function(t){return"markdown"===t.cell_type},K=function(t){var e,n,r=function(t){if(!t)return null;var e=t.metadata,n=t.cells,r=e.colab.name,a=n.find(q),c=n.find(X),u=a?a.source.join("\n"):null,i=c?c.source:null;if(!i)return null;var o=i.map(Z).filter((function(t){return t})).map(Q),s=Object.fromEntries(o),p=o[0][0];return{form:{properties:s},name:r,description:u,numCells:n.length,primaryInput:p}}((null===t||void 0===t?void 0:t.input)&&t.input["notebook.ipynb"]||t&&t["notebook.ipynb"]),a=null===r||void 0===r?void 0:r.primaryInput;return{primaryInput:null===t||void 0===t||null===(e=t.input)||void 0===e?void 0:e[a],firstContent:null===(n=R(null===t||void 0===t?void 0:t.output))||void 0===n?void 0:n.first}},$=n(10),tt=function(t){var e,n,r=t.imgs,a=t.isHover,c=Object(i.useState)(0),u=Object(O.a)(c,2),o=u[0],s=u[1];return Object(i.useEffect)((function(){if(!a)return null;var t=setInterval((function(){s((function(t){return(t+1)%r.length}))}),100);return function(){return clearInterval(t)}}),[a]),Object($.jsx)("div",{style:{width:"100%",minHeight:"50%",backgroundColor:"black",display:"flex",alignItems:"center"},children:Object($.jsx)("img",{src:null===(e=r[o])||void 0===e||null===(n=e.result)||void 0===n?void 0:n.url,style:{width:"100%",height:"auto"}})})},et=function(t){var e=Object(i.useState)(!1),n=Object(O.a)(e,2),r=n[0],a=n[1];return Object($.jsxs)("article",{className:"article",onMouseOver:function(){return a(!0)},onMouseOut:function(){return a(!1)},children:[Object($.jsx)(tt,{imgs:t[1],isHover:r}),Object($.jsxs)("div",{children:[Object($.jsx)("p",{children:t[0]}),Object($.jsx)("p",{children:"Frames: ".concat(t[1].length)})]})]})},nt=function(t){var e=t.pollenList,n=t.lastDate,r=t.elapsed;return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("h2",{children:"follow the pollen"}),Object($.jsx)("p",{children:"IMG count: ".concat(e.length)}),Object($.jsx)("p",{children:"".concat((e.length/n).toFixed(2)," imgs / second")}),Object($.jsx)("p",{children:"".concat(m()().diff(r,"minutes")," minutes elapsed")})]})};var rt=function(t){var e,n,r=t.elapsed,a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(i.useState)(null),r=Object(O.a)(n,2),a=r[0],c=r[1];return Object(i.useEffect)((function(){return M(t,e,c)}),[t,e]),a}("processing_pollen"),c=G(a),u=Object(i.useState)([]),o=Object(O.a)(u,2),s=o[0],p=o[1],f=Object(i.useState)(),l=Object(O.a)(f,2),b=l[0],d=l[1];return Object(i.useEffect)((function(){var t=K(c),e=t.primaryInput,n=t.firstContent;if(!n.url)return null;p((function(t){return[].concat(Object(g.a)(t),[{prompt:e,result:n,cid:c.cid}])})),d(-1*r.diff(m()(),"seconds"))}),[c]),Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{style:{padding:"1em"},children:Object($.jsx)(nt,{pollenList:s,elapsed:r,lastDate:b})}),Object.entries((e=s,n=function(t){return t.prompt},e.reduce((function(t,e,r,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n(e);return(t[c]||(t[c]=[])).push(e),t}),{}))).map((function(t){return Object($.jsx)(et,Object(j.a)({},t),t[0])}))]})},at=function(){var t=m()();return Object($.jsx)(f.a,{children:Object($.jsx)(v,{children:Object($.jsx)(rt,{elapsed:t})})})};p.a.render(Object($.jsx)(o.a.StrictMode,{children:Object($.jsx)(h,{children:Object($.jsx)(at,{})})}),document.getElementById("root"))}},[[368,1,2]]]);
//# sourceMappingURL=main.1247f0bc.chunk.js.map